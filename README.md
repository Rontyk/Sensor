# Sensor API

Этот проект реализует REST API для приема данных от сенсоров, которые измеряют температуру и погодные условия. Он построен с использованием Spring Boot и включает поддержку JWT для аутентификации и авторизации. В проекте также используется Docker для контейнеризации и PostgreSQL для хранения данных.

## Описание

API предназначен для регистрации сенсоров, получения измерений от сенсоров, а также подсчета дождливых дней. Пользователи могут регистрировать сенсоры, отправлять данные о температуре и осадках, а также запрашивать количество дождливых дней.

### Основные функции:

- **Регистрация сенсора**: Возможность зарегистрировать сенсор в системе.
- **Добавление измерений**: Получение данных о температуре и погодных условиях от сенсора.
- **Подсчет дождливых дней**: Получение количества дождливых дней на основе записанных измерений.
- **JWT аутентификация**: Защита эндпоинтов с использованием JWT токенов.
- **Контейнеризация с Docker**: Использование Docker для развертывания приложения.

## Структура проекта

- **com.example.sensor.controller** — Контроллеры для обработки HTTP-запросов.
- **com.example.sensor.service** — Сервисы, которые содержат бизнес-логику.
- **com.example.sensor.repository** — Репозитории для взаимодействия с базой данных.
- **com.example.sensor.model** — Модели (сущности), которые представляют данные.
- **com.example.sensor.dto** — Объекты передачи данных (DTO).
- **com.example.sensor.security** — Логика для работы с JWT и безопасностью.
- **resources** — Конфигурации и файлы приложения.

## Используемые технологии

- **Spring Boot** — Основной фреймворк для разработки REST API.
- **Spring Security** — Для реализации аутентификации и авторизации с использованием JWT.
- **Spring Data JPA** — Для работы с базой данных PostgreSQL.
- **PostgreSQL** — Реляционная база данных для хранения данных.
- **Docker** — Для контейнеризации приложения.
- **Gradle** — Система сборки.

## Эндпоинты

### 1. POST `/sensors/registration`
Регистрация нового сенсора.

**Пример запроса:**
{
  "name": "sensorName"
}
### 2. POST `/measurements/add`
Добавление нового измерения от сенсора.

**Пример запроса:**
{
  "value": 23.5,
  "raining": true,
  "sensor": {
    "name": "sensorName"
  }
}
### 3. GET `/measurements`
**Получение всех измерений.**
[
  {
    "value": 23.5,
    "raining": true,
    "sensor": {
      "name": "sensorName"
    }
  },
  {
    "value": 19.0,
    "raining": false,
    "sensor": {
      "name": "sensorName"
    }
  }
]

### 4. GET `/measurements/rainyDaysCount`
**Получение количества дождливых дней.**
{
  "rainyDaysCount": 5
}

### Установка и запуск
Требования
Java 21
Docker (опционально, для контейнеризации)
Запуск без Docker
Убедитесь, что у вас установлен JDK 21 и Gradle.

Клонируйте репозиторий:
Соберите и запустите приложение:

./gradlew bootRun

### Запуск с Docker
Клонируйте репозиторий:

docker build -t sensor-api .
Запустите контейнер:

docker run -p 8080:8080 sensor-api

### Запустите контейнеры с помощью команды:
docker-compose up --build
Приложение будет доступно по адресу http://localhost:8080/api.
